{% from "character-count/macro.njk" import govukCharacterCount %}
{% from "back-link/macro.njk" import govukBackLink %}
{% from "button/macro.njk" import govukButton %}
{% from "error-summary/macro.njk" import govukErrorSummary %}
{% from "../../component/textarea/macro.njk" import textarea with context %}
{% from "input/macro.njk" import govukInput %}
{% from "checkboxes/macro.njk" import govukCheckboxes %}

{% from "date-input/macro.njk" import govukDateInput %}
{% from "file-upload/macro.njk" import govukFileUpload %}

{% extends "../../component/Page.njk" %}

{% block pageTitle %}
{{ i18n.course.pageTitle.editCourseDetails if course else i18n.course.pageTitle.addCourseDetails }} - {{ i18n.proposition_name }}
{% endblock %}

{% set banner = true %}
{% set backButton = "/content-management/skills" %}

{% block content %}
{% set errors = sessionFlash.errors %}
{% set form = sessionFlash.form %}
{% set course = sessionFlash.course %}

{{ errorSummary(errors.fields) }}

<div class="govuk-grid-row add-new-question">
    <div class="govuk-grid-column-two-thirds">
        <h1 class="govuk-heading-m govuk-!-font-size-36">Add new question</h1>
        <form action="/content-management/courses/details/{{ course.id }}" method="post" class="course-form">
            {% if course.id %}
            <input type="hidden" name="id" value="{{ form.id|default(course.id) }}">
            {% endif %}
            <input id="title" name="title" type="hidden" value="{{ form.title|default(course.title)}}">
            <input id="topicId" name="topicId" type="hidden" value="{{ form.topicId|default(course.topicId) }}">
            <input  id="visibility" name="visibility" type="hidden" value="{{ course.visibility }}">
            <fieldset class="govuk-fieldset">

                <div class="govuk-character-count" data-module="govuk-character-count" data-minlength="10" data-maxlength="500">
                    <div class="govuk-form-group">
                        <label class="govuk-label" for="theme">
                            Question
                        </label>
                        <span id="question-hint" class="govuk-hint">
                            Maximum of 500 characters.
                        </span>
                        <textarea class="govuk-textarea govuk-js-character-count" id="question" name="theme" rows="5" aria-describedby="question-info" required></textarea>
                    </div>
                </div>


                <section class="answers">
                    <p class="label">Answers</p>
                    <div class="govuk-checkboxes">
                        <div class="govuk-checkboxes__item">
                            <input class="govuk-checkboxes__input" id="answer0" name="waste" type="checkbox" value="carcasses" checked disabled>
                            <label class="govuk-label govuk-checkboxes__label" for="answer0">
                                <p>Please tick the checkboxes that contain the correct answers</p>
                            </label>
                        </div>
                        <div class="govuk-checkboxes__item">
                            <input class="govuk-checkboxes__input" id="answer1" name="waste" type="checkbox" value="carcasses">
                            <label class="govuk-label govuk-checkboxes__label" for="answer1">
                                <input class="govuk-input" id="answer1-txt" name="event-name" type="text">
                            </label>
                        </div>
                        <div class="govuk-checkboxes__item">
                            <input class="govuk-checkboxes__input" id="answer2" name="waste" type="checkbox" value="carcasses">
                            <label class="govuk-label govuk-checkboxes__label" for="answer2">
                                <input class="govuk-input" id="answer2-txt" name="event-name" type="text">
                            </label>
                        </div>
                        <div class="govuk-checkboxes__item">
                            <input class="govuk-checkboxes__input" id="answer3" name="waste" type="checkbox" value="carcasses">
                            <label class="govuk-label govuk-checkboxes__label" for="answer3">
                                <input class="govuk-input" id="answer3-txt" name="event-name" type="text">
                            </label>
                        </div>
                        <div class="govuk-checkboxes__item">
                            <input class="govuk-checkboxes__input" id="answer4" name="waste" type="checkbox" value="carcasses">
                            <label class="govuk-label govuk-checkboxes__label" for="answer4">
                                <input class="govuk-input" id="answer4-txt" name="event-name" type="text">
                            </label>
                        </div>
                        <div class="govuk-checkboxes__item">
                            <input class="govuk-checkboxes__input" id="answer5" name="waste" type="checkbox" value="carcasses">
                            <label class="govuk-label govuk-checkboxes__label" for="answer5">
                                <input class="govuk-input" id="answer5-txt" name="event-name" type="text">
                            </label>
                        </div>
                    </div>

                </section>


                <div class="govuk-character-count" data-module="govuk-character-count" data-minlength="10" data-maxlength="500">
                    <div class="govuk-form-group">
                        <label class="govuk-label" for="theme">
                            Text given after answer
                        </label>
                        <span id="text-given-hint" class="govuk-hint">
                            This is the text that will be displayed after the user has completed the quiz.
                        </span>
                        <textarea class="govuk-textarea govuk-js-character-count" id="txt-given-after-answer" name="theme" rows="5" aria-describedby="txt-given-after-answer-info" required></textarea>
                    </div>
                </div>

                <div class="govuk-character-count" data-module="govuk-character-count" data-minlength="3" data-maxlength="200">
                    <div class="govuk-form-group">
                        <label class="govuk-label" for="theme">
                            Theme
                        </label>
                        <textarea class="govuk-textarea govuk-js-character-count" id="theme" name="theme" rows="1" aria-describedby="theme-info" required></textarea>
                    </div>
                </div>

                <div class="govuk-character-count" data-module="govuk-character-count" data-minlength="0" data-maxlength="500">
                    <div class="govuk-form-group">
                        <label class="govuk-label" for="suggested-learning">
                            Suggested learning
                        </label>
                        <textarea class="govuk-textarea govuk-js-character-count" id="suggested-learning" name="suggested-learning" rows="1" aria-describedby="suggested-learning-info" required></textarea>
                    </div>
                </div>


                <div class="add-file-form govuk-form-group">
                    <label class="govuk-label">Attach supporting images (optional)</label>
                    <input class="govuk-file-upload custom-uploader" id="image-upload" name="img" type="file" aria-describedby="file-upload-hint" accept="image/*">
                    <label class="btn" for="image-upload"><span>Choose file</span></label>
                </div>

            </fieldset>
            <div class="button-container">
                {{ govukButton({
                text: "Add Question",
                href: "add-new-question"
                }) }}
            </div>
        </form>
        <a class="cancel-button govuk-body govuk-link" href="#">Cancel</a>
    </div>
    <div class="govuk-grid-column-one-third">
    </div>
</div>
{% endblock %}

{% block bodyEnd %}
<script src="/govuk-frontend/all.js"></script>
<script>window.GOVUKFrontend.initAll()</script>
<script type="text/javascript" src="/js/accessible-autocomplete.min.js"></script>
<script type="text/javascript" src="/js/manage-orgs.js"></script>
<script src="/js/file-uploader.js"></script>
{% endblock %}